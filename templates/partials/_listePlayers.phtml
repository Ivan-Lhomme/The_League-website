<?php
    require "managers/AbstractManager.php";

        /* asked ai for this prompt: make code cleaner, original code: $query = AbstractManager::$db->prepare("SELECT players.nickname, players.portrait, media.url, players.team, teams.name FROM players JOIN media ON players.id = media.player_id, Join teams ON teams.id = players.team");*/
    $query = AbstractManager::$db->prepare(" 
            SELECT 
                p.nickname,
                p.portrait,
                m.url,
                t.name AS team_name
            FROM players AS p
            JOIN media AS m ON p.id = m.player_id
            JOIN teams AS t ON t.id = p.team
        ");

$query->execute();
    $values = $query->fetchAll();
?>


<section class = "list_players">
    <article>
        <?php foreach($values as $players) { ?>
            <div>
                <img src="<?php echo $players['portrait']; ?>" alt="<?php echo $players['nickname']; ?>" />
                <h3> <?= $players['nickname']; ?></h3>
                <p><?= $players['teams_name']; ?></p>
            </div>
        <?php } ?>


    </article>
</section>



<?php
    require "managers/AbstractManager.php";

    /*$query = AbstractManager::$db->prepare("SELECT players.nickname, players.portrait, media.url, players.team, teams.name FROM players JOIN media ON players.id = media.player_id, Join teams ON teams.id = players.team");*/
$query = AbstractManager::$db->prepare(" 
        SELECT 
            p.nickname,
            p.portrait,
            m.url,
            t.name AS team_name
        FROM players AS p
        JOIN media AS m ON p.id = m.player_id
        JOIN teams AS t ON t.id = p.team
    ");

$query->execute();
    $values = $query->fetchAll();
?>


<section class = "list_players">
    <article>
        <?php foreach($values as $players) { ?>
            <div>
                <img src="<?php echo $players['portrait']; ?>" alt="<?php echo $players['nickname']; ?>" />
                <h3> <?= $players['nickname']; ?></h3>
                <p><?= $players['teams_name']; ?></p>
            </div>
        <?php } ?>


    </article>
</section>



